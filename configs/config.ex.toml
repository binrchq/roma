
title = 'Roma Configs File'

[api]
gin_mode = 'release'
host = '0.0.0.0'
port = '6999'
cors_allow_origins = 'https://roma.binrc.com,https://roma-demo.binrc.com'  # CORS 允许的域名列表，多个用逗号分隔，留空则允许所有来源

[common]
language = 'zh'
port = '2200'
prompt = 'roma'                            # 历史缓存配置
history_tmp_dir = '/tmp/roma_history'      # 历史文件存储目录
history_tmp_max_line = 1000                # 最大历史记录行数
history_tmp_max_size = 10485760            # 最大历史文件大小（字节），默认10MB

[database]
cdb_url = '/usr/local/roma/c.db'
rdb_passwd = ''
rdb_url = ''

[log]
level = 'debug'

[apikey]
prefix = 'apikey.'
key = 'AAAA2EAAHBZY26A25wOraC1c--------------------------xxx'    #接口用到的密钥

[user_1st]
email = 'super@test.x'
name = '超级管理员'
nickname = 'Super'
password = 'super001.'
public_key = '#<超级用户的私钥>'
username = 'super'
roles = "super,system,ops,ordinary,trial"

[control_passport]
service_user = 'root'
password = ''
resource_type = 'linux'
passport_pub = '<#跳板机的公钥>'
passport = '''<#跳板机的私钥>
'''
description = "default control's passport , and ops use this passport"

[banner]
show = true
banner = '''
       ______
      /\     \
     />.\_____\
   __\  /  ___/__        _ROMA__
  /\  \/__/\     \  ____/
 /O \____/*?\_____\
 \  /    \  /     /                 [A seamless solution for remote access, ensuring both efficiency and security.]
  \/_____/\/_____/
'''


# 权限蓝图（用于校验与提示，可按需扩展）
[[permissions]]
name = "user"
actions = ["add", "delete", "update", "get", "list"]

[[permissions]]
name = "resource"
actions = ["add", "delete", "update", "get", "list", "use"]

[[permissions]]
name = "logs"
actions = ["list"]

# 角色定义（结构化权限）
[[roles]]
name = "super"
description = "Super Administrator"
is_default_super = true
  [[roles.permissions]]
  target = "*"
  actions = ["*"]

[[roles]]
name = "system"
description = "System Administrator"
  [[roles.permissions]]
  target = "user"
  actions = ["get", "list"]
  [[roles.permissions]]
  target = "resource"
  actions = ["add", "delete", "update", "get", "list", "use"]
  [[roles.permissions]]
  target = "logs"
  actions = ["list"]

[[roles]]
name = "ops"
description = "Ops engineer"
  [[roles.permissions]]
  target = "resource"
  actions = ["get", "list", "use"]

[[roles]]
name = "ordinary"
description = "Standard user"
  [[roles.permissions]]
  target = "resource"
  actions = ["get", "list"]

[[roles]]
name = "trial"
description = "Trial user with limited scope"
  [[roles.permissions]]
  target = "resource"
  actions = ["get", "list"]
  [[roles.permissions]]
  target = "resource"
  actions = ["use"]
    [roles.permissions.scope]
    type = "include"
    value = "trial"

# 权限策略配置
[permission_policy]
# 是否启用资源角色检查（资源可以指定哪些角色可以访问）
enable_resource_role = true
# 是否启用空间隔离（资源属于空间，只有空间成员才能访问）
enable_space_isolation = true
# 是否要求用户角色和资源角色完全匹配（true=必须匹配，false=有任一匹配即可）
require_exact_role_match = false
# 是否允许 super 角色绕过所有限制（包括资源角色和空间隔离）
super_bypass_all = true
# 默认空间名称（全局资源所属的空间，留空表示无空间归属）
default_space = ""

# 空间定义（原 projects，现统一使用 spaces）
[[spaces]]
name = "production"
description = "生产环境空间"
members = ["super", "system"]  # 用户名列表
default_role = "ops"  # 空间内默认角色

[[spaces]]
name = "development"
description = "开发环境空间"
members = ["super", "system", "ops"]
default_role = "ops"